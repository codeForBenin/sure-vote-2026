{% extends 'base.html.twig' %}

{% block title %}Email Interne - Supervision
{% endblock %}

{% block body %}
	<div class="min-h-screen bg-slate-50 py-10 px-4 sm:px-6 lg:px-8">
		<div class="max-w-3xl mx-auto bg-white p-8 rounded-[2rem] shadow-lg border border-slate-100">
			<h1 class="text-2xl font-black text-slate-800 mb-6 flex items-center gap-3">
				<div class="h-10 w-10 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center">
					<i class="fas fa-paper-plane"></i>
				</div>
				Envoyer un Email Interne
			</h1>

			{{ form_start(form, {'attr': {'class': 'space-y-6'}}) }}

			{# Subject #}
			<div>
				{{ form_label(form.subject, null, {'label_attr': {'class': 'block text-sm font-bold text-slate-700 mb-2'}}) }}
				{{ form_widget(form.subject, {'attr': {'class': 'w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-benin-green/30  focus:ring-2 focus:ring-benin-green/50  transition-all outline-none'}}) }}
				{{ form_errors(form.subject) }}
			</div>

			{# Mode Selection: All vs Specific #}
			<div x-data="{ sendAll: false }" class="bg-benin-green/10 p-6 rounded-2xl border border-benin-green/10">
				<div class="flex items-center gap-3 mb-4">
					{{ form_widget(form.sendToAll, {
                        'attr': {
                            'class': 'h-5 w-5 text-benin-green focus:ring-benin-green border-gray-300 rounded',
                            'x-model': 'sendAll'
                        }
                    }) }}
					<label for="{{ form.sendToAll.vars.id }}" class="text-benin-green font-bold cursor-pointer select-none">
						Envoyer à tous les assesseurs
					</label>
				</div>

				<div x-show="!sendAll" x-transition class="mt-4 pt-4 border-t border-benin-green/10">
					<label class="block text-sm font-medium text-benin-green mb-2">Ou sélectionner un destinataire unique :</label>
					{{ form_widget(form.recipient, {'attr': {'class': 'w-full px-4 py-3 bg-white rounded-xl border border-benin-green/10 focus:border-benin-green/10 transition-all'}}) }}
				</div>
			</div>

			{# Message #}
			<div>
				{{ form_label(form.message, null, {'label_attr': {'class': 'block text-sm font-bold text-black mb-2'}}) }}
				{{ form_widget(form.message, {'attr': {'class': 'w-full px-4 py-3 rounded-xl border border-benin-green/50 focus:border-benin-green/30  focus:ring-2 focus:ring-benin-green/50  transition-all outline-none', 'rows': 6}}) }}
			</div>

			<div class="pt-6 flex items-center gap-4">
				<button type="submit" class="flex-1 bg-benin-green hover:bg-benin-green/80 text-white font-bold py-3.5 px-6 rounded-xl shadow-lg shadow-benin-green/10 transition-all flex items-center justify-center gap-2">
					<i class="fas fa-paper-plane text-sm"></i>
					Envoyer le message
				</button>
				<a href="{{ path('admin') }}" class="px-6 py-3.5 border border-benin-green/10 rounded-xl text-benin-green font-bold hover:bg-benin-green/10 transition-colors">
					Annuler
				</a>
			</div>

			{{ form_end(form) }}
		</div>
	</div>

	<!-- Alpine.js for simple visibility toggle -->
	<script src="//unpkg.com/alpinejs" defer></script>
{% endblock %}
